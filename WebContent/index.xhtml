<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	

<h:head>
	
</h:head>

<h:body>


	<h:form>
		<h1>Cadastro de aluno</h1>
		
		<p:messages id="messages" showDetail="true" closable="true">
  		 </p:messages>
		
		<p:growl />
		
		<p:panelGrid columns="1">
			<p:outputLabel value="Nome" for="nome" />
			<p:inputText required="true" requiredMessage="Campo nome obrigatório" id="nome" value="#{helloMBean.aluno.nome}" />
			
			<p:selectOneButton  value="#{helloMBean.aluno.sexo}">
            <f:selectItem itemLabel="Masculino" itemValue="Masculino" />
            <f:selectItem itemLabel="Feminino" itemValue="Feminino" />
        	</p:selectOneButton>
			
			<p:outputLabel value="Idade" for="idade" />
			<p:inputText required="true" requiredMessage="Campo idade obrigatório" id="idade" value="#{helloMBean.aluno.idade}" />

			<p:outputLabel for="cursos" value="Curso:" />
      		<p:selectOneMenu id="cursos" value="#{helloMBean.aluno.curso}" effect="fold" editable="true">
            <f:selectItem itemLabel="Select One" itemValue="" />
            <f:selectItems value="#{helloMBean.cursosenai}" />
       		</p:selectOneMenu>
			
			<p:outputLabel value="Nota Final" for="notaFinal" />
			<p:inputText required="true" requiredMessage="Campo nota final obrigatório" id="notaFinal" value="#{helloMBean.aluno.notaFinal}" />
			
			
			<p:commandButton value="Salvar" ajax="false"  
				actionListener="#{helloMBean.salvarAluno}"  />
				
		</p:panelGrid>
		<br/><br/>
		
		
		<p:dataTable var="aluno" value="#{helloMBean.alunos}" emptyMessage="Não há alunos cadastrados!">	
			<p:column filterBy="#{aluno.nome}" headerText="Nome">
				<f:facet name="header">Nome do Aluno</f:facet>
				<h:outputText required="true"  value="#{aluno.nome}" />
			</p:column>
			<p:column>
				<f:facet name="header">Sexo</f:facet>
				<h:outputText value="#{aluno.sexo}" />
			</p:column>
			<p:column>
				<f:facet name="header">Idade</f:facet>
				<h:outputText  value="#{aluno.idade}" />
			</p:column>
			<p:column>
				<f:facet name="header">Curso</f:facet>
				<h:outputText value="#{aluno.curso}" />
			</p:column>
			<p:column>
				<f:facet name="header">Nota final</f:facet>
				<h:outputText value="#{aluno.notaFinal}" />
			</p:column>
			<p:column>
				<f:facet name="header">Ação</f:facet>
				<p:commandButton value="Editar">
					<f:setPropertyActionListener 
					value="#{aluno}" 
					target="#{helloMBean.aluno}"/>
				</p:commandButton>
			</p:column>
		</p:dataTable>
		<br/>
		<p:commandButton value="Calcular média" actionListener = "#{helloMBean.calcularMedia}" />
		<br/><br/>
		<h3>Média sala: <h:outputText value ="#{helloMBean.formatedMedia}" /></h3>
		
	</h:form>
	
</h:body>
</html>